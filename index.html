<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="theme-color" content="#2196F3">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–¥–æ—Ä–æ–∂ –≤—ñ–¥—á—É—Ç—Ç—ñ–≤</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json" />
</head>

<body>
    <div class="app-container">
        <div id="mobile-frame">
            <div id="app" class="app-inner-wrapper">

                <div id="slider">
                    <div id="slide-1" class="slide">
                        <div class="slide-card slide-card--sun">
                            <h1 class="slide-title slide-title--sun">–ö–æ–ª—å–æ—Ä–∏ –ú–æ—î—ó –ú—Ä—ñ—ó</h1>
                            <p class="slide-text">–ñ–æ–≤—Ç–∏–π –∫–æ–ª—ñ—Ä ‚Äî —Ü–µ —Å–≤—ñ—Ç–ª–æ, –µ–Ω–µ—Ä–≥—ñ—è —Ç–∞ –ø–æ—á–∞—Ç–æ–∫ –Ω–æ–≤–æ—ó –ø–æ–¥–æ—Ä–æ–∂—ñ
                                –≤—ñ–¥—á—É—Ç—Ç—ñ–≤.</p>
                        </div>
                        <div class="slide-hint">
                            <p>–°–≤–∞–π–ø–Ω—ñ—Ç—å –≤–ª—ñ–≤–æ &rarr;</p>
                        </div>
                    </div>

                    <div id="slide-2" class="slide">
                        <div class="slide-card slide-card--ocean">
                            <h2 class="slide-title slide-title--ocean">–©–æ –í–∞—Å —Ç—É—Ä–±—É—î?</h2>
                    
                            <textarea id="user-feeling" class="feeling-textarea" placeholder="–û–ø–∏—à—ñ—Ç—å –∫–æ—Ä–æ—Ç–∫–æ –í–∞—à—É —Å–∏—Ç—É–∞—Ü—ñ—é –∞–±–æ –ø–∏—Ç–∞–Ω–Ω—è..."
                                rows="4"></textarea>
                    
                            <button class="advice-button" onclick="getAIAdvice()" id="advice-submit-button">
                                –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ—Ä–æ—Ç–∫—É –ø–æ—Ä–∞–¥—É üåä
                            </button>
                    
                            <div id="ai-advice-output" class="ai-advice">
                                –¢—É—Ç –∑'—è–≤–∏—Ç—å—Å—è –í–∞—à–∞ –ø–æ—Ä–∞–¥–∞...
                            </div>
                        </div>
                    </div>

                    <div id="slide-3" class="slide">
                        <div class="slide-card slide-card--nature">
                            <h2 class="slide-title slide-title--nature">–ü–†–ò–†–û–î–ê</h2>
                            <p class="slide-text slide-text--nature">
                                –•–∞–π –∑–µ–ª–µ–Ω–∏–π –∫–æ–ª—ñ—Ä –ø—Ä–∏–Ω–æ—Å–∏—Ç—å –≤–∞–º –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—É –Ω–∞–¥—ñ—é, –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è —Ç–∞ –≥–∞—Ä–º–æ–Ω—ñ—é –∫–æ–∂–Ω–æ–≥–æ –¥–Ω—è.
                            </p>
                        </div>
                    </div>

                </div>
            </div>

            <div id="pagination" class="pagination-dots">
                <span id="dot-0" class="dot active"></span>
                <span id="dot-1" class="dot"></span>
                <span id="dot-2" class="dot"></span>
            </div>
        </div>
    </div>

    <script>const API_URL = "http://127.0.0.1:8000/get_advice"; // !!! –£–í–ê–ì–ê: –ó–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ –ø—É–±–ª—ñ—á–Ω–∏–π URL, –∫–æ–ª–∏ –±—É–¥–µ—Ç–µ –¥–µ–ø–ª–æ—ó—Ç–∏ !!!

        async function getAIAdvice() {
            const textarea = document.getElementById('user-feeling');
            const output = document.getElementById('ai-advice-output');
            const button = document.getElementById('advice-submit-button');
            const query = textarea.value.trim();

            if (query.length < 5) {
                output.innerHTML = "–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –±—ñ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π (–º—ñ–Ω. 5 —Å–∏–º–≤–æ–ª—ñ–≤).";
                return;
            }

            // 1. –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
            button.disabled = true;
            button.textContent = "–û–±—Ä–æ–±–∫–∞... ‚è≥";
            output.innerHTML = "–®–Ü –æ–±–º—ñ—Ä–∫–æ–≤—É—î –í–∞—à—É —Å–∏—Ç—É–∞—Ü—ñ—é...";

            try {
                // 2. –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –∑–∞–ø–∏—Ç—É –Ω–∞ –≤–∞—à FastAPI-—Å–µ—Ä–≤–µ—Ä
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ query: query })
                });

                if (!response.ok) {
                    throw new Error(`–ü–æ–º–∏–ª–∫–∞ API! –°—Ç–∞—Ç—É—Å: ${response.status}`);
                }

                const data = await response.json();

                // 3. –í–∏–≤–µ–¥–µ–Ω–Ω—è –ø–æ—Ä–∞–¥–∏
                output.innerHTML = `<span style="font-weight: 600;">–ü–æ—Ä–∞–¥–∞:</span> ${data.advice}`;

            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥ —á–∞—Å –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ—Ä–∞–¥–∏ –≤—ñ–¥ –®–Ü:', error);
                output.innerHTML = "–í–∏–±–∞—á—Ç–µ, —Å—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è. –°–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ.";
            } finally {
                // 4. –†–æ–∑–±–ª–æ–∫—É–≤–∞–Ω–Ω—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
                button.disabled = false;
                button.textContent = "–û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ—Ä–æ—Ç–∫—É –ø–æ—Ä–∞–¥—É üåä";
            }
        }</script>

    <script src="app.js"></script>
</body>

</html>